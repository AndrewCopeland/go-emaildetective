version: '3'

dotenv: ['.env', '{{.ENV}}/.env.', '{{.HOME}}/.env']

tasks:
  generate:
    desc: generate database and handlers code
    cmds:
      - |
        docker run --rm -v "${PWD}:/local" openapitools/openapi-generator-cli generate \
          -i "$OPENAPI_SPEC" \
          --additional-properties packageName=emaildetective \
          -g go \
          -o /local
  push:
    desc: push a new version
    cmds:
      - git tag -a $TAG -m "Version $TAG"
      - git push origin --tags


